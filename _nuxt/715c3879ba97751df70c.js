(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{400:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=400},419:function(e,t,r){"use strict";r.r(t);r(53),r(20),r(21),r(5),r(22),r(32),r(33),r(7),r(41);var n=r(13),c=r(17),o=r(29),l=r(26),h=r(24),f=r(14),d=r(18),m=r(54),v=r(65),y=r.n(v),j=r(395);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var O=function(e,t,r,desc){var n,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(c<3?n(o):c>3?n(t,r,o):n(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},x=j.a.Bar,C=function(e){Object(l.a)(r,e);var t=w(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"watchTmp",value:function(){this.main()}},{key:"mounted",value:function(){this.main()}},{key:"clickChart",value:function(data){return data}},{key:"main",value:function(){var e=this.chartData,t=this,r={maintainAspectRatio:!1,onClick:function(r,n){var label=n[0]._model.label;t.clickChart({property:e.property,label:label,evt:r})}};this.renderChart(e,r)}}]),r}(Object(m.mixins)(x));O([Object(m.Prop)({default:[]})],C.prototype,"chartData",void 0),O([Object(m.Watch)("chartData",{deep:!0})],C.prototype,"watchTmp",null),O([Object(m.Emit)("clickChart")],C.prototype,"clickChart",null);var k=C=O([m.Component],C),R=r(46),_=Object(R.a)(k,void 0,void 0,!1,null,null,null).exports;function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var P=function(e,t,r,desc){var n,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(c<3?n(o):c>3?n(t,r,o):n(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},T=j.a.Pie,U=function(e){Object(l.a)(r,e);var t=D(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"watchTmp",value:function(){this.main()}},{key:"mounted",value:function(){this.main()}},{key:"clickChart",value:function(data){return data}},{key:"main",value:function(){var e=this.chartData,t=this,r={maintainAspectRatio:!1,onClick:function(r,n){var label=n[0]._model.label;t.clickChart({property:e.property,label:label,evt:r})}};this.renderChart(e,r)}}]),r}(Object(m.mixins)(T));P([Object(m.Prop)({default:[]})],U.prototype,"chartData",void 0),P([Object(m.Watch)("chartData",{deep:!0})],U.prototype,"watchTmp",null),P([Object(m.Emit)("clickChart")],U.prototype,"clickChart",null);var I=U=P([m.Component],U),L=Object(R.a)(I,void 0,void 0,!1,null,null,null).exports;function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var F=function(e,t,r,desc){var n,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(c<3?n(o):c>3?n(t,r,o):n(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},A=function(e){Object(l.a)(h,e);var t,r=V(h);function h(){var e;return Object(c.a)(this,h),(e=r.apply(this,arguments)).chartDataArray=[],e.pieChartData={},e.loadingFlag=!0,e.dialogFlag=!1,e.selectedLabel={},e.objctTypeUriProperties=[],e}return Object(o.a)(h,[{key:"mounted",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=["rdf:type","rdfs:label","schema:contributor","schema:creator","schema:publisher","schema:temporal","schema:dateCreated","schema:datePublished","schema:spatial","schema:about","schema:isbn","schema:issn","schema:inLanguage","schema:image","schema:isPartOf","schema:relatedLink","jps:accessInfo","jps:sourceInfo","schema:name","schema:identifier"],r=regeneratorRuntime.mark((function e(i){var r,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[i],c=void 0,c=r.includes("jps")?"\n            prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            prefix schema: <http://schema.org/>\n            prefix jps: <https://jpsearch.go.jp/term/property#>\n            select distinct count(?s) as ?c ?o where {\n              ?s "+r+" ?node;\n              jps:sourceInfo ?si . \n              ?node schema:provider ?o .\n            } order by desc(?c) limit 20\n      ":"\n            prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            prefix schema: <http://schema.org/>\n            prefix jps: <https://jpsearch.go.jp/term/property#>\n            select distinct count(?s) as ?c ?o where {\n              ?s "+r+" ?o;\n              jps:sourceInfo ?si . \n            } order by desc(?c) limit 20\n      ",o=n,e.next=7,y.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(c.trim())+"&output=json").then((function(e){for(var t=e.data.results.bindings,n=[],c=[],l=o.objctTypeUriProperties,h=0;h<t.length;h++){var b=t[h],f=b.o.value,d=Number(b.c.value);"literal"!==b.o.type&&(l.includes(r)||l.push(r)),n.push(f),c.push(d)}o.objctTypeUriProperties=l;var m={property:r,labels:n,terms:n,datasets:[{data:c,label:o.$t("# of items")}]};o.chartDataArray.push(m)}));case 7:case"end":return e.stop()}}),e)})),i=0;case 3:if(!(i<t.length)){e.next=8;break}return e.delegateYield(r(i),"t0",5);case 5:i++,e.next=3;break;case 8:this.loadingFlag=!1;case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"selectedLabelUpdated",value:function(data){this.selectedLabel=data,this.dialogFlag=!0,this.getDbs(data.property,data.label)}},{key:"getColor",value:function(){return"#"+((1<<24)*(Math.random()+1)|0).toString(16).substr(1)}},{key:"getDbs",value:function(e,label){var t,r=this;t=e.includes("jps")?"\n            prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            prefix schema: <http://schema.org/>\n            prefix jps: <https://jpsearch.go.jp/term/property#>\n            select distinct count(?s) as ?c ?o where {\n              ?s "+e+" ?node;\n              jps:sourceInfo ?si . \n              ?si schema:provider ?o .\n              ?node schema:provider ?o2 .\n              filter (?o2 = "+(this.objctTypeUriProperties.includes(e)?"<"+label+">":"'"+label+"'")+")\n            } order by desc(?c) limit 20\n      ":"\n            prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            prefix schema: <http://schema.org/>\n            prefix jps: <https://jpsearch.go.jp/term/property#>\n            select distinct count(?s) as ?c ?o where {\n              ?s "+e+" ?o2;\n              jps:sourceInfo ?si . \n              ?si schema:provider ?o .\n              filter (?o2 = "+(this.objctTypeUriProperties.includes(e)?"<"+label+">":"'"+label+"'")+")\n            } order by desc(?c) limit 20\n      ";var n=this;y.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(t.trim())+"&output=json").then((function(t){for(var c=t.data.results.bindings,o=[],l=[],h=[],f=0,d=0;d<c.length;d++){var b=c[d],m=b.o.value,v=Number(b.c.value);o.push(m),l.push(v),h.push(r.getColor()),f+=Number(v)}var y={property:e,labels:o,terms:o,total:f.toLocaleString(),datasets:[{data:l,backgroundColor:h,label:n.$t("# of items")}]};n.pieChartData=y}))}},{key:"search",value:function(){var e,t=this.selectedLabel,r=t.property,label=t.label;e=r.includes("jps")?"\n            prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            prefix schema: <http://schema.org/>\n            prefix jps: <https://jpsearch.go.jp/term/property#>\n            select distinct ?cho ?label ?image where {\n              ?cho "+r+" ?node;\n              jps:sourceInfo ?si;\n              rdfs:label ?label . \n              OPTIONAL {?cho schema:image ?image}\n              ?si schema:provider ?o .\n              ?node schema:provider ?o2 .\n              filter (?o2 = "+(this.objctTypeUriProperties.includes(r)?"<"+label+">":"'"+label+"'")+")\n            }\n      ":"\n            prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            prefix schema: <http://schema.org/>\n            prefix jps: <https://jpsearch.go.jp/term/property#>\n            select distinct ?cho ?label ?image where {\n              ?cho "+r+" ?o2;\n              jps:sourceInfo ?si;\n              rdfs:label ?label .\n              OPTIONAL {?cho schema:image ?image}\n              ?si schema:provider ?o .\n              filter (?o2 = "+(this.objctTypeUriProperties.includes(r)?"<"+label+">":"'"+label+"'")+")\n            }\n      ";var n="https://jpsearch.go.jp/rdf/sparql/easy/?query=";n+=encodeURIComponent(e.trim()),window.open(n,"_blank")}},{key:"head",value:function(){return{title:this.$t("properties")}}}]),h}(m.Vue),N=A=F([Object(m.Component)({components:{Chart:_,PieChart:L}})],A),S=r(73),$=r.n(S),E=r(205),B=r(387),J=r(386),M=r(383),W=r(414),Y=r(356),z=r(147),G=r(44),H=r(358),K=Object(R.a)(N,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-sheet",{attrs:{color:"grey lighten-3"}},[r("v-container",{staticClass:"py-4"},[r("h1",[e._v("\n        "+e._s(e.$t("properties"))+"\n      ")])])],1),e._v(" "),r("v-container",[e._l(e.chartDataArray,(function(t,n){return r("v-card",{key:n,staticClass:"my-10"},[r("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("\n        "+e._s(t.property)+"\n      ")]),e._v(" "),r("v-container",[r("Chart",{key:n,staticClass:"mb-4",attrs:{height:400,"chart-data":t},on:{clickChart:e.selectedLabelUpdated}})],1)],1)})),e._v(" "),r("div",{staticClass:"text-center pa-10"},[e.loadingFlag?r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):e._e()],1)],2),e._v(" "),r("v-dialog",{attrs:{width:"500"},model:{value:e.dialogFlag,callback:function(t){e.dialogFlag=t},expression:"dialogFlag"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("\n        "+e._s(e.selectedLabel.property)+" - "+e._s(e.selectedLabel.label)+" -\n        "+e._s(e.pieChartData.total)+"\n      ")]),e._v(" "),r("v-container",[r("PieChart",{staticClass:"mb-4",attrs:{height:400,"chart-data":e.pieChartData}})],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.search()}}},[e._v("\n          "+e._s(e.$t("search"))+"\n        ")]),e._v(" "),r("v-btn",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("\n          "+e._s(e.$t("close"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=K.exports;$()(K,{VBtn:E.a,VCard:B.a,VCardActions:J.a,VCardTitle:J.b,VContainer:M.a,VDialog:W.a,VDivider:Y.a,VProgressCircular:z.a,VSheet:G.a,VSpacer:H.a})}}]);